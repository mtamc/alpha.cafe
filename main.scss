// Imports
@use 'css/reset'; // undo browser defaults
@use "sass:math"; // currently relying on abs

// content font
@import url('https://fonts.googleapis.com/css2?family=Rubik&display=swap');
// nav font
@import url('https://fonts.googleapis.com/css2?family=Dosis:wght@700&display=swap');
// headings font
@import url('https://fonts.googleapis.com/css2?family=Boogaloo&display=swap');

// Sass variables used where needed for use inside
// media query declarations
$main_offset: -80px;
$ribbon_extra_width: 30px;
$site_width: 550px;

:root {
	--header_height: 120px;
	--main_bg: #FFF;
	--main_font: 'Rubik', sans-serif;
	--main_offset: #{$main_offset};
	--main_title_color: #392713;
	--main_title_font: 'Boogaloo', cursive;
	--nav_bg: #DA9149;
	--page_bg: #FAF9F3;
	--ribbon_extra_width: #{$ribbon_extra_width};
	--site_width: #{$site_width};
	--title_shadow: #FFDF89;

	// realign site to center when screen gets too small to show
	// main + right graphics
	@media (max-width: #{$site_width + 2 * math.abs($main_offset) + $ribbon_extra_width}) {
		--main_offset: 0px;
	}
}

html {
	background: var(--page_bg);
	height: auto;
	min-height:100%;
}

body { // header image is set as body bg
	background: url(./img/header_bg.png) no-repeat calc(50% + var(--main_offset)) top;
	font-family: var(--main_font);
	height: auto;
	min-height:100%;
	// TODO: remove this, move footer graphics to footer element
	//       check if it works on mobile
	// overflow-x: hidden;
	// create header area which is currently empty space
	padding-top: var(--header_height);

	// on small screen, re-center header image
	// to center Alpha.Cafe logo
	@media (max-width: #{$site_width}) {
		background-position: 70% top;
	}
}

*::selection { // any selected text
	color: unset;
	background-color: var(--title_shadow);
	text-shadow: none;
}

a { // reset link style
	color: unset;
	text-decoration: unset;
}

// navlink header ribbon
nav {
	background-color: var(--nav_bg);
	background-image: url(./img/nav_texture.png);
	box-shadow: 0px 3px 5px -2px rgba(0,0,0,0.75),
	            0px -3px 5px -2px rgba(0,0,0,0.6);
	// TODO: fixed burger for mobile?
	display: flex; // neatly align navlinks
	flex-wrap: wrap;
	justify-content: space-around;
	left: var(--main_offset);
	line-height: 30px;
	margin: auto;
	max-width: calc(var(--site_width) + var(--ribbon_extra_width));
	// padding: 0 20px; // for space-between
	position: relative;
	transform-style: preserve-3d; // needed over bare z-index here
	width: 100%;
	z-index: 2; // this lets its shadow be over the <main>

	a { // TODO: hover effects
		color: var(--main_bg);
		font-family: 'Dosis', sans-serif;
		padding: 0 5px;
		text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
	}

	// ribbon tips
	&::before, &::after {
		// using an image ribbon tip for texture
		content: url(./img/ribbon_left.png);
		filter: drop-shadow(0px -1px 3px rgba(0,0,0,0.6));
		-webkit-filter: drop-shadow(0px -1px 3px rgba(0,0,0,0.6));
		left: calc(-1 * var(--ribbon_extra_width));
		position: absolute;
		top: 15px;
		// this lets its shadow be under the nav
		transform: translateZ(-1px); // needed over bare z-index here

		// hide ribbon tips when viewport too small
		@media (max-width: #{$site_width + $ribbon_extra_width + 12px}) {
			display: none;
		}
	}

	&::after {
		right: calc(-1 * var(--ribbon_extra_width));
		// flip that same image
		transform: scaleX(-1) translateZ(-1px); // also z-index fix here
	}
}

main {
	background-color: var(--main_bg);
	background-image: url("./img/notebook.png");
	// gradient/shadow outline on each side
	box-shadow: 3px 3px 5px 0px rgba(0,0,0,0.3),
	           -3px 3px 5px 0px rgba(0,0,0,0.3);
	height: auto;
	left: var(--main_offset);
	margin: auto;
	margin-bottom: 34px; // give empty space for footer image
	max-width: var(--site_width);
	// when main smaller than vh, ensure main still takes whole page
	min-height: calc(100vh - 184px);
	padding-bottom: 85px; // ensure no text is over footer kokone
	position: relative;
	// I am hiding the notebook lines under the text
	// using a strong white text-shadow.
	// An alternative to this would be to wrap the text
	// inside each <p> with an inline element (e.g. <span>)
	// possessing background-color: white;.
	text-shadow:
		0px 2px 0 rgba(255, 255, 255, 1),
		3px 2px 0 rgba(255, 255, 255, 1),
		-3px 2px 0 rgba(255, 255, 255, 1),
		2px 2px 0 rgba(255, 255, 255, 1),
		-2px 2px 0 rgba(255, 255, 255, 1);
	width: 100%;
	z-index: 1; // needed for h2 hover effect
}

// page title
h1 {
	color: var(--main_title_color);
	font-family: var(--main_title_font);
	font-size: 26px;
	line-height: 26px;
	margin-bottom: 42px; // alignment for notebook lines
	padding: 6px 10px 0 10px;
	position: relative;
	text-align: center;
	text-shadow: // text tower shadow effect
		1px 1px var(--title_shadow),
		2px 2px var(--title_shadow),
		3px 3px var(--title_shadow),
		4px 4px var(--title_shadow);
	// top: 10px; // creates effect i am leaning towards not keeping
	z-index: 2;

	// small alpha logo TODO: make it less intrusive when title on two lines
	&::before {
		content: url(./img/h1_logo.png);
		display: inline-block;
		filter: drop-shadow(3px 3px 0px #222);
		-webkit-filter: drop-shadow(3px 3px 0 px #222);
		margin-right: 16px;
		position: relative;
		top: 6px;
	}

	// background under page title
	&::after {
		background: url(./img/h1_bg.png) center 0px no-repeat;
		// border-top: 1px dashed #C0A79D; // see above, not keeping atm
		content: "";
		display: block;
		height: 44px;
		left: 0px;
		max-width: var(--site_width);
		opacity: .7; // TODO: just change opacity on the image itself
		position: absolute;
		top: -2px; // TODO: just remove the 2 lines from the image
		width: 100%;
		z-index: -1;
	}
}

// headings
h2 {
	background: // pen highlighter effect, alongside text-shadow
		linear-gradient(
			104deg,
			rgba(255, 223, 137,0) 0.9%,
			rgba(255, 223, 137,1.25) 2.4%,
			rgba(255, 223, 137,0.5) 5.8%,
			rgba(255, 223, 137,0.4) 93%,
			rgba(255, 223, 137,0.7) 96%,
			rgba(255, 223, 137,0) 98%
		),
		linear-gradient(
			183deg,
			rgba(255, 223, 137,0) 0%,
			rgba(255, 223, 137,0.3) 7.9%,
			rgba(255, 223, 137,0) 15%
		);
	border-radius: 7.5px; // highlighter
	display: block;
	font-family: var(--main_title_font);
	font-size: 21px; // notebook alignment
	margin-bottom: 4.5px; // notebook alignment
	margin-left: 8px;
	margin-right: 5px;
	margin-top: -3px; // notebook alignment
	padding: 0 36px 0 80px; // leave space for heading logos
	text-shadow: // highlighter
		-12px 5px 6.8px rgba(255, 223, 137,0.7),
		6px -4px 11px rgba(255, 255, 255,1),
		-5px -2px 12px rgba(255, 255, 255,1);

	// anchor logo
	a.heading &::after {
		background: url(./img/anchor.svg);
		content: "";
		display: inline-block;
		height:16px;
		top: calc(50% - 11px);
		opacity: 0; // hidden unless heading is h overed
		position: absolute;
		right: 50px; // will slide further right on hover
		transition: 0s;
		width: 16px;
	}

	a.heading:hover &::after {
		opacity: 1;
		right: calc(4% + 8px);
		transition: 0.5s;
	}

	// heading changes background on hover
	// need pseudoelement w/ opacity transition for gradient transition
	&::before {
		background:
			linear-gradient(
				104deg,
				rgba(245, 181, 117,0) 0.9%,
				rgba(245, 181, 117,1.25) 2.4%,
				rgba(245, 181, 117,0.5) 5.8%,
				rgba(245, 181, 117,0.4) 93%,
				rgba(245, 181, 117,0.7) 96%,
				rgba(245, 181, 117,0) 98%
			),
			linear-gradient(
				183deg,
				rgba(245, 181, 117,0) 0%,
				rgba(245, 181, 117,0.3) 7.9%,
				rgba(245, 181, 117,0) 15%
			);
		border-radius: 7.5px; // highlighter
		content: "";
		display: block;
		height: 100% ;
		left: 0;
		margin-left: 8px;
		opacity: 0;
		position: absolute;
		transition: 0.3s;
		width: calc(100% - 15px);
		z-index: -1; // ensure the pseudoelement doesn't hide text
	}

	a.heading:hover &::before {
		opacity: 1; // when heading is hovered, new gradient fades in
	}
}

a.heading {
	display: inline-block;
	position: relative;
	width: 100%;

	// set different logo for each successive heading
	@for $i from 1 through 3 { // TODO: create more than 3 logos
		&:nth-of-type(#{$i})::before {
			content: url(./img/small_logo#{$i}.png);
		}
	}

	&::before { // logo positioning
		left: 33px;
		position: absolute;
		top: calc(50% - 16px);
		z-index: 2;
	}

}

main p { // mostly alignment for notebook lines
	font-size: 14px;
	line-height: 26px;
	margin-bottom: 25.5px;
	padding: 0 16px;
	// I believe this is for the case I change text to be able to go
	// over the footer image.
	z-index: 2;
}


// bottom of page background / kokone
main::after {
	background: url(./img/footer_bg.png) no-repeat bottom; // landscape
	content: url(./img/footer_logo.png); // kokone / character
	display: block;
	height: 154px;
	left: -60px;
	margin: auto;
	margin-top: -120px;
	padding-left: 0px;
	padding-top: 0px;
	position: absolute;
	top: 100%;
	width: 669px;
}

// footer TEXT only
footer.sitewide { // TODO: make more reactive once content has been decided
	font-size: 13px;
	left: var(--main_offset);
	margin: auto;
	margin-top: -100px;
	max-width: var(--site_width);
	padding-left: 100px;
	position: relative;
	text-align: center;
	width: 100%;
	z-index: 4; // make sure the text is not covered by the landscape
	            // potentially unneeded currently

	p { // different highlighter effect on the footer text
		background:
			linear-gradient(
				104deg,
				rgba(255, 223, 137,0) 0.9%,
				rgba(255, 223, 137,1.25) 2.4%,
				rgba(255, 223, 137,0.5) 5.8%,
				rgba(255, 223, 137,0.4) 93%,
				rgba(255, 223, 137,0.7) 96%,
				rgba(255, 223, 137,0) 98%
			),
			linear-gradient(
				183deg,
				rgba(255, 223, 137,0) 0%,
				rgba(255, 223, 137,0.3) 7.9%,
				rgba(255, 223, 137,0) 15%
			);
		display: inline-block;
		text-shadow:
			-3px 4px 5px rgba(255, 223, 137, 0.7),
			3px -4px 7.3px white,
			-3px -4px 6px white;
	}
}


